<app-hero title="Ergebnisse Jahrgang {{ year }}"></app-hero>

<div class="container">
  <div class="center">
    <div class="choice-container">
      <div class="class">
        <mat-expansion-panel style="margin-bottom: 5px;" *ngFor="let c of results?.classStudentsResponses">
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{ c.name }}
            </mat-panel-title>

            <mat-panel-description>
              {{ c.teacherResponse.firstname }} {{ c.teacherResponse.surname }} - {{ c.teacherResponse.abbreviation }}
            </mat-panel-description>

            <mat-panel-description>
              {{ c.tapeName }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="choice" *ngFor="let student of c.studentSurveillanceResponses">
            {{ student.firstname }} {{ student.surname }}
          </div>
        </mat-expansion-panel>
      </div>
      <div class="class">
        <div class="rules not-fulfilled" *ngIf="results?.studentsNotFulfilledRules!.length > 0">
          <h2>{{ results?.studentsNotFulfilledRules!.length }}
            Schüler {{ results?.studentsNotFulfilledRules!.length === 1 ? 'hat' : 'haben' }} nicht alle Wahlbedingungen
            erfüllt.</h2>
          <mat-list role="list">
            <mat-list-item class="student-list" style="text-align: left;"
                           *ngFor="let student of results?.studentsNotFulfilledRules"
                           role="listitem"
                           (click)="goToAssignChoice(student.studentId, student.year)">
              <span style="color: white">{{ student.firstname }} {{ student.surname }}</span>
            </mat-list-item>
          </mat-list>

        </div>
        <div class="rules not-chosen" *ngIf="results?.studentsNotChosen!.length > 0">
          <h2>{{ results?.studentsNotChosen!.length }}
            Schüler {{ results?.studentsNotChosen!.length === 1 ? 'hat' : 'haben' }} nicht gewählt.</h2>
          <mat-list role="list">
            <mat-list-item class="student-list" style="text-align: left;"
                           *ngFor="let student of results?.studentsNotChosen"
                           role="listitem"
                           (click)="goToAssignChoice(student.studentId, student.year)">
              <span style="color: white">{{ student.firstname }} {{ student.surname }}</span>
            </mat-list-item>
          </mat-list>

        </div>
        <div class="rules fulfilled"
             *ngIf="results?.studentsNotFulfilledRules!.length === 0 && results?.studentsNotChosen!.length === 0">
          <h2>Alle Schüler haben die Wahlbedingungen erfüllt.</h2>
        </div>

      </div>
    </div>
  </div>
</div>
